<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kuponlar ğŸŸï¸</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <style>
        .coupon-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .coupon-card { background: white; padding: 15px; border-radius: 15px; border: 1px dashed var(--secondary); font-size: 0.9rem; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; text-align: center; min-height: 60px; }
        .coupon-card:active { transform: scale(0.95); }
        .coupon-card.used { background: #eee; text-decoration: line-through; opacity: 0.6; border-color: #ccc; cursor: default; }
    </style>
</head>
<body>
    <div class="container">
        <h2>AÅŸk KuponlarÄ± ğŸŸï¸</h2>
        <p class="subtitle">Ä°stediÄŸin zaman kullan!</p>

        <div id="coupon-list" class="coupon-grid">
            <p>YÃ¼kleniyor...</p>
        </div>

        <button class="btn-main" onclick="resetCoupons()" style="background:#95a5a6; margin-top:30px;">KuponlarÄ± Yenile ğŸ”„</button>
    </div>

    <div class="navbar">
        <a href="../index.html" class="nav-link"><i class="fas fa-home"></i></a>
        <a href="#" class="nav-link active"><i class="fas fa-ticket-alt"></i></a>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="../js/config.js"></script>
    <script>
        firebase.initializeApp(window.APP_CONFIG.FIREBASE);
        const db = firebase.database();
        const couponsRef = db.ref('coupons');

        const couponNames = [
            "Masaj ğŸ’†â€â™€ï¸", "Film SeÃ§imi ğŸ¬", "Ã‡ikolata ğŸ«", "Susma HakkÄ± ğŸ¤«", 
            "Yemek Ismarla ğŸ”", "Temizlik Muaf ğŸ§¹", "5dk SarÄ±lma ğŸ«‚", "Kahve Yap â˜•", 
            "Oje SÃ¼r ğŸ’…", "ÅarkÄ± SÃ¶yle ğŸ¤", "Oyun Gecesi ğŸ²", "Yatakta KahvaltÄ± ğŸ¥", 
            "Trip Ä°zni ğŸ¤", "DoÄŸa YÃ¼rÃ¼yÃ¼ÅŸÃ¼ ğŸŒ³", "10 FotoÄŸraf ğŸ¤³", "Prenses Hisset ğŸ‘¸", 
            "JOKER ğŸƒ", "ÅofÃ¶rlÃ¼k ğŸš—", "AlÄ±ÅŸveriÅŸ EÅŸlik ğŸ›ï¸", "Dondurma ğŸ¦", 
            "Kumanda HakkÄ± ğŸ“º", "Ayak MasajÄ± ğŸ¦¶", "SaÃ§ OkÅŸama ğŸ’†â€â™‚ï¸", "Diyet Bozma ğŸŸ", 
            "BulaÅŸÄ±k (Ben) ğŸ§¼", "Uyku Ä°zni ğŸ’¤", "Dans Et ğŸ’ƒ", "Åiir Oku ğŸ“œ", 
            "Hayvan Videosu ğŸ¶", "Seni Seviyorum De â¤ï¸"
        ];

        couponsRef.on('value', snapshot => {
            const usedData = snapshot.val() || {};
            const container = document.getElementById('coupon-list');
            container.innerHTML = "";

            couponNames.forEach((name, index) => {
                const div = document.createElement('div');
                div.className = 'coupon-card ' + (usedData[index] ? 'used' : '');
                div.innerText = name;
                
                div.onclick = () => {
                    if(!usedData[index]) {
                        if(confirm(`"${name}" kuponunu kullanmak istiyor musun?`)) {
                            db.ref('coupons/' + index).set(true);
                        }
                    }
                };
                container.appendChild(div);
            });
        });

        function resetCoupons() {
            if(confirm("TÃ¼m kuponlarÄ± sÄ±fÄ±rlamak istiyor musun? (30 GÃ¼n dolduysa yap)")) {
                couponsRef.set(null);
            }
        }
    </script>
</body>
</html>